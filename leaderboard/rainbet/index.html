<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>McPlayGT | Rainbet Leaderboard</title>
  <link rel="stylesheet" href="/css/style.css" />
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  />
  <link
    rel="icon"
    href="https://i.postimg.cc/PxjzYRr0/image.png"
    type="image/png"
  />
  <meta name="description" content="McPlayGT - Exclusive wager races!" />
  <meta name="author" content="McPlayGT" />
  <style>
    /* Rules Button */
    .rules-btn {
      margin-left: 15px;
      background: linear-gradient(135deg, #b7a101 0%, #ffd500 100%);
      border: none;
      cursor: pointer;
      transition: all 0.3s ease;
      padding: 8px 16px;
      border-radius: 5px;
      font-weight: 600;
    }
    .rules-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(255, 213, 0, 0.3);
    }
    /* Modal Styles */
    #rulesModal {
      position: fixed;
      z-index: 99999;
      left: 0;
      top: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(0, 0, 0, 0.8);
      display: none;
    }
    #rulesModal.show {
      display: flex !important;
      align-items: center !important;
      justify-content: center !important;
    }
    #rulesModal .modal-content {
      background: #1a1a1a;
      border-radius: 12px;
      max-width: 600px;
      width: 90%;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
      border: 1px solid #333;
      margin: 20px;
      animation: modalSlideIn 0.3s ease;
    }
    @keyframes modalSlideIn {
      from {
        transform: translateY(-30px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }
    /* Countdown Styles */
    .countdown-container {
      text-align: center;
      margin: 15px 0;
      color: #ffd500;
      font-weight: 600;
      font-size: 16px;
    }
    .count-down {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-top: 4px;
      margin-bottom: 12px;
    }
    .count-down .counter {
      display: inline-block;
      min-width: 56px;
      margin: 0 4px;
      background: #222;
      padding: 8px 6px;
      border-radius: 8px;
    }
    .count-down .label {
      font-size: 11px;
      color: #ffd500;
      margin-top: 2px;
      text-align: center;
    }
  </style>
</head>
<body>
  <!-- Rules Modal -->
  <div id="rulesModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Rainbet Leaderboard Rules</h2>
        <span class="modal-close" onclick="closeRulesModal()">×</span>
      </div>
      <div class="modal-body">
        <h3>Disclaimer</h3>
        <ul class="rules-list">
          <li>Every bet on code McPlayGT is counted.</li>
        </ul>
      </div>
    </div>
  </div>

  <div class="bg-gradient"></div>
  <canvas id="particleCanvas"></canvas>

  <!-- Header -->
  <header class="header-v2">
    <div class="header-wrapper">
      <div class="logo-area">
        <a href="/">
          <img src="https://i.postimg.cc/WhjWXnFD/image.png" alt="McPlayGT" class="header-logo" />
        </a>
        <div class="live-status">
          <button id="liveButton" class="live-button offline">
            <img src="https://i.postimg.cc/vT6Yy35H/image.png" alt="Kick" class="kick-icon" />
            <span>OFFLINE</span>
          </button>
        </div>
      </div>
      <div class="nav-area desktop-nav">
        <a href="/" class="nav-item"><i class="fa-solid fa-house"></i><span>Home</span></a>
        <a href="/leaderboard" class="nav-item active"><i class="fa-solid fa-trophy"></i><span>Leaderboards</span></a>
      </div>
      <div class="menu-toggle">
        <button onclick="openNav()" aria-label="Open menu"><i class="fa-solid fa-bars"></i></button>
      </div>
    </div>
  </header>

  <!-- Leaderboard Section -->
  <section class="swiperSection">
    <div class="container">
      <div class="row">
        <div class="col-12">
          <div class="boxContent fade-in">
            <h4 class="center" id="leaderboard-heading">My Leaderboards</h4>
          </div>
          <div class="swiperContent">
            <div class="paymentBtn d-flex align-center justify-center scale-in" id="gf-BtnContainer">
              <button class="gf-btn stagger-item" onclick="window.location.href='/leaderboard/rainbet'">
                <img src="https://i.postimg.cc/mthzQ70c/image.png" alt="Roobet" class="img-fluid paymentLogo" />
              </button>
            </div>
            <div class="gallery sets">
              <div class="gf-column bollywood show">
                <div class="contentSwiperTop fade-in">
                  <div class="modelButtons d-flex align-center justify-center">
                    <p class="btnPara" id="site-code">CODE: LOADING...</p>
                    <button class="btnPara rules-btn" id="prev-leaderboard-btn" style="margin-left: 12px;">
                      <i class="fa-solid fa-clock-rotate-left"></i> PREVIOUS LEADERBOARD
                    </button>
                    <button class="btnPara rules-btn" id="rules-btn" style="display: none;">
                      <i class="fa-solid fa-info-circle"></i> RULES
                    </button>
                  </div>
                </div>

                <!-- Countdown -->
                <div id="date-range-container" class="countdown-container"></div>

                <!-- Top 3 Boxes -->
                <div class="row gridRow d-flex align-center justify-center">
                  <div class="box-1 box stagger-item">
                    <div class="imgNumberBox">
                      <img src="https://i.postimg.cc/sXFPrDBk/rainbetlogo.png" alt="" class="img-fluid" id="user-2-img" />
                      <div class="boxNumber"><p>2</p><i class="fa-solid fa-diamond"></i></div>
                    </div>
                    <h1 class="mainHeading" id="user-2-name">...</h1>
                    <p class="mainPara">Wagered</p>
                    <div class="imgprice d-flex align-center justify-center">
                      <img src="" alt="" class="coin-icon" id="coin-icon-2" />
                      <p id="user-2-wagered">0.00</p>
                    </div>
                    <div class="priceBtn d-flex align-center justify-center">
                      <img src="" alt="" class="coin-icon" id="prize-coin-icon-2" />
                      <p id="user-2-price">0.00</p>
                    </div>
                  </div>

                  <div class="box-2 box stagger-item">
                    <div class="imgNumberBox">
                      <img src="https://i.postimg.cc/sXFPrDBk/rainbetlogo.png" alt="" class="img-fluid" id="user-1-img" />
                      <div class="boxNumber"><p>1</p><i class="fa-solid fa-diamond"></i></div>
                    </div>
                    <h1 class="mainHeading" id="user-1-name">...</h1>
                    <p class="mainPara">Wagered</p>
                    <div class="imgprice d-flex align-center justify-center">
                      <img src="" alt="" class="coin-icon" id="coin-icon-1" />
                      <p id="user-1-wagered">0.00</p>
                    </div>
                    <div class="priceBtn d-flex align-center justify-center">
                      <img src="" alt="" class="coin-icon" id="prize-coin-icon-1" />
                      <p id="user-1-price">0.00</p>
                    </div>
                  </div>

                  <div class="box-3 box stagger-item">
                    <div class="imgNumberBox">
                      <img src="https://i.postimg.cc/sXFPrDBk/rainbetlogo.png" alt="" class="img-fluid" id="user-3-img" />
                      <div class="boxNumber"><p>3</p><i class="fa-solid fa-diamond"></i></div>
                    </div>
                    <h1 class="mainHeading" id="user-3-name">...</h1>
                    <p class="mainPara">Wagered</p>
                    <div class="imgprice d-flex align-center justify-center">
                      <img src="" alt="" class="coin-icon" id="coin-icon-3" />
                      <p id="user-3-wagered">0.00</p>
                    </div>
                    <div class="priceBtn d-flex align-center justify-center">
                      <img src="" alt="" class="coin-icon" id="prize-coin-icon-3" />
                      <p id="user-3-price">0.00</p>
                    </div>
                  </div>
                </div>

                <!-- Leaderboard Table -->
                <div class="row leaderBoardTable fade-in">
                  <div class="col-12" style="overflow-x: auto;">
                    <table id="customers">
                      <tr>
                        <th>Place</th>
                        <th>User</th>
                        <th>WAGERED</th>
                        <th>Reward</th>
                      </tr>
                    </table>
                  </div>
                </div>
              </div><!-- gf-column -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer>
    <div class="container">
      <div class="footer-compact">
        <div class="footer-main">
          <div class="social-icons">
            <a href="https://www.instagram.com/McPlayGT" aria-label="Instagram"><i class="fa-brands fa-instagram"></i></a>
            <a href="https://discord.gg/6FEn66ymvc" aria-label="Discord"><i class="fa-brands fa-discord"></i></a>
            <a href="https://kick.com/mcplaygt" aria-label="Kick"><i class="fa-brands fa-kickstarter"></i></a>
            <a href="https://tiktok.com/@mcplaygt" aria-label="TikTok"><i class="fa-brands fa-tiktok"></i></a>
            <a href="https://twitter.com/mcplaygt" aria-label="Twitter"><i class="fa-brands fa-twitter"></i></a>
            <a href="https://youtube.com/c/mcplaygt" aria-label="YouTube"><i class="fa-brands fa-youtube"></i></a>
            <a href="https://twitch.tv/McPlayGT" aria-label="Twitch"><i class="fa-brands fa-twitch"></i></a>
            <a href="https://discord.gg/ktbvU9DhMp" aria-label="Discord"><i class="fa-brands fa-discord"></i></a>
          </div>
          <div class="footer-links">
            <a href="/">Home</a>
            <a href="/leaderboard">Leaderboards</a>
            <a href="https://www.gambleaware.org/">BeGambleAware</a>
          </div>
        </div>
        <div class="footer-bottom">
          <p class="disclaimer">Gamble responsibly (18+). We do not take responsibility for any losses from
            gambling sites linked or promoted on our website.</p>
          <p class="copyright">© 2025 McPlayGT</p>
        </div>
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <script>
    const siteConfig = {
      rainbet: {
        name: 'Rainbet',
        code: 'McPlayGT',
        url: 'https://rainbet.com/?r=McPlayGT',
        coinIcon: '',
        coinSymbol: '$',
        rewardStructure: {
          1: 400,2: 200,3: 100,4: 50,5: 25,6: 25,7: 0,8: 0,9: 0,10: 0,
        }
      },
    };

    function getCurrentSite() {
      const path = window.location.pathname;
      const match = path.match(/\/leaderboard\/(\w+)/);
      return match ? match[1] : 'rainbet'; 
    }
    function updateActiveButton() {
      const site = getCurrentSite();
      document.querySelectorAll('.gf-btn').forEach(btn => {
        btn.classList.remove('gf-btn-active');
        const onclickAttr = btn.getAttribute('onclick');
        const match = onclickAttr && onclickAttr.match(/\/leaderboard\/(\w+)/);
        if (match && match[1] === site) {
          btn.classList.add('gf-btn-active');
        }
      });
    }
    function updateSiteContent() {
      const site = getCurrentSite();
      const config = siteConfig[site];
      const codeBtn = document.getElementById('site-code');
      codeBtn.textContent = `CODE: ${config.code}`;
      codeBtn.onclick = () => window.open(config.url, '_blank');
      const rulesBtn = document.getElementById('rules-btn');
      rulesBtn.style.display = site === 'rainbet' ? 'inline-block' : 'none';
    }
    const truncateText = (text, maxLength = 12) => {
      return text?.length > maxLength ? text.substring(0, maxLength) + '...' : text;
    };
    function getPrizeForRank(rank, rewardStructure, coinSymbol) {
      const prize = rewardStructure[rank];
      if (prize !== undefined) {
        return `${coinSymbol} ${prize.toLocaleString('en-US', { minimumFractionDigits: 0, maximumFractionDigits: 0 })}`;
      }
      return 'N/A';
    }

    // Countdown helpers
    function getCurrentLeaderboardRange() {
      const now = new Date();
      return {
        start: new Date(now.getFullYear(), now.getMonth(), 1),
        end: new Date(now.getFullYear(), now.getMonth() + 1, 0, 23, 59, 59)
      };
    }
    function formatDateShort(date) {
      const day = date.getDate();
      let suffix = 'th';
      if (day === 1 || day === 21 || day === 31) suffix = 'st';
      else if (day === 2 || day === 22) suffix = 'nd';
      else if (day === 3 || day === 23) suffix = 'rd';
      const month = date.toLocaleString('en-US', { month: 'short' });
      const year = date.getFullYear();
      return `${day}${suffix} ${month} ${year}`;
    }
    let timerInterval = null;
    function showDateAndCountdown(usePrev) {
      const container = document.getElementById('date-range-container');
      container.innerHTML = '';
      if (usePrev) {
        const now = new Date();
        const prevFrom = new Date(now.getFullYear(), now.getMonth() - 1, 1);
        const prevTo = new Date(now.getFullYear(), now.getMonth(), 0, 23, 59, 59);
        container.innerHTML = `<div class="date-range">${formatDateShort(prevFrom)} - ${formatDateShort(prevTo)}</div>
          <div id="date-message" style="color:#999; font-size:14px;">This leaderboard has ended.</div>`;
        if (timerInterval) clearInterval(timerInterval);
      } else {
        const { start, end } = getCurrentLeaderboardRange();
        container.innerHTML = `<div class="date-range">${formatDateShort(start)} - ${formatDateShort(end)}</div>
          <div style="margin-bottom:6px; color:#bbb;">Ends in:</div>
          <div class="count-down">
            <div class="counter"><span class="days">00</span><div class="label">Days</div></div>
            <div class="counter"><span class="hours">00</span><div class="label">Hours</div></div>
            <div class="counter"><span class="minutes">00</span><div class="label">Minutes</div></div>
            <div class="counter"><span class="seconds">00</span><div class="label">Seconds</div></div>
          </div>`;
        if (timerInterval) clearInterval(timerInterval);
        function updateCountdown() {
          const now = new Date().getTime();
          const distance = end.getTime() - now;
          let days = Math.floor(distance / (1000 * 60 * 60 * 24));
          let hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
          let minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
          let seconds = Math.floor((distance % (1000 * 60)) / 1000);
          if (distance < 0) { days = hours = minutes = seconds = 0; }
          container.querySelector('.days').textContent = String(days).padStart(2, '0');
          container.querySelector('.hours').textContent = String(hours).padStart(2, '0');
          container.querySelector('.minutes').textContent = String(minutes).padStart(2, '0');
          container.querySelector('.seconds').textContent = String(seconds).padStart(2, '0');
        }
        updateCountdown();
        timerInterval = setInterval(updateCountdown, 1000);
      }
    }

    // Leaderboard
    let showingPrevLeaderboard = false;
    async function updateLeaderboard(usePrev = false) {
      try {
        const site = getCurrentSite();
        const url = usePrev
          ? 'https://colebeardata.onrender.com/leaderboard/prev'
          : 'https://Sutchyyyslotsdata.onrender.com/leaderboard/top14';
        const response = await fetch(url);
        const data = await response.json();
        const config = siteConfig[site];
        data.sort((a, b) => b.weightedWager - a.weightedWager);

        for (let i = 1; i <= 3; i++) {
          const user = data[i - 1];
          const rank = i;
          if (user) {
            document.getElementById(`user-${i}-img`).src = user.img || 'https://i.postimg.cc/sXFPrDBk/rainbetlogo.png';
            document.getElementById(`user-${i}-wagered`).textContent = `${config.coinSymbol} ${user.weightedWager.toLocaleString('en-US',{minimumFractionDigits:2,maximumFractionDigits:2})}`;
            document.getElementById(`user-${i}-name`).textContent = truncateText(user.username);
            document.getElementById(`user-${i}-price`).textContent = getPrizeForRank(rank, config.rewardStructure, config.coinSymbol);
          } else {
            document.getElementById(`user-${i}-img`).src = 'https://i.postimg.cc/sXFPrDBk/rainbetlogo.png';
            document.getElementById(`user-${i}-name`).textContent = '...';
            document.getElementById(`user-${i}-wagered`).textContent = '0.00';
            document.getElementById(`user-${i}-price`).textContent = 'N/A';
          }
        }

        const table = document.getElementById('customers');
        while (table.rows.length > 1) table.deleteRow(1);
        data.slice(3).forEach((user, index) => {
          const rank = index + 4;
          const row = table.insertRow();
          row.innerHTML = `
            <th>${rank}.</th>
            <td><div class="d-flex align-center"><img src="${user.img || 'https://i.postimg.cc/sXFPrDBk/rainbetlogo.png'}" alt="" class="img-fluid"><p>${truncateText(user.username)}</p></div></td>
            <td><p>${config.coinSymbol} ${user.weightedWager.toLocaleString('en-US',{minimumFractionDigits:2,maximumFractionDigits:2})}</p></td>
            <td><p>${getPrizeForRank(rank, config.rewardStructure, config.coinSymbol)}</p></td>
          `;
        });

        const headingElement = document.getElementById('leaderboard-heading');
        const leaderboardType = usePrev ? 'PREVIOUS' : 'CURRENT';
        const siteName = config.name.toUpperCase();
        headingElement.innerHTML = `${siteName} ${leaderboardType} WAGER LEADERBOARD`;

        showDateAndCountdown(usePrev);
      } catch (error) {
        console.error('Error updating leaderboard:', error);
        document.getElementById('leaderboard-heading').textContent = 'Error loading leaderboard data.';
      }
    }

    async function updatePrevToggleLeaderboard() {
      const btn = document.getElementById('prev-leaderboard-btn');
      if (showingPrevLeaderboard) {
        btn.innerHTML = `<i class="fa-solid fa-trophy"></i> CURRENT LEADERBOARD`;
        await updateLeaderboard(true);
      } else {
        btn.innerHTML = `<i class="fa-solid fa-clock-rotate-left"></i> PREVIOUS LEADERBOARD`;
        await updateLeaderboard(false);
      }
    }

    function openRulesModal() { document.getElementById('rulesModal').classList.add('show'); }
    function closeRulesModal() { document.getElementById('rulesModal').classList.remove('show'); }

    document.addEventListener('DOMContentLoaded', () => {
      updateActiveButton();
      updateSiteContent();
      updateLeaderboard();
      document.getElementById('rules-btn').addEventListener('click', openRulesModal);
      document.getElementById('prev-leaderboard-btn').addEventListener('click', () => {
        showingPrevLeaderboard = !showingPrevLeaderboard;
        updatePrevToggleLeaderboard();
      });
    });
    window.addEventListener('popstate', () => {
      updateActiveButton();
      updateSiteContent();
      updateLeaderboard(showingPrevLeaderboard);
    });
  </script>
</body>
</html>
